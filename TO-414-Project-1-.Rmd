---
title: "TO 414 Project 1"
author: "Chandramouli Krishnan, Rahul Rokkam, Kristian Olsen, Nick Davis, Lena Ivens, Sean Conway"
date: "10/11/2020"
output: 
  html_document: 
    toc: yes
    toc_float: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Clean Data
```{r echo = FALSE, eval = FALSE}
prospectData = read.csv("ProjectA_Listings2013.csv")
#head(prospectData)

#summary(prospectData)
#potential factors: loan status, scorexRange, income range, employment status, borrower state, 

# potential numeric: 
#potential boolean: incomeverification

prospectData$loan_status = as.factor(prospectData$loan_status)
prospectData$scorex = as.factor(prospectData$scorex)
prospectData$income_range = as.factor(prospectData$income_range)
prospectData$employment_status_description = as.factor(prospectData$employment_status_description)
prospectData$borrower_state = as.factor(prospectData$borrower_state)
prospectData$income_verifiable = as.logical(prospectData$income_verifiable)
#prospectData$prosper_rating = as.factor(prospectData$prosper_rating)

prospectData$Defaulted = ifelse(prospectData$loan_status_description == "DEFAULTED", 1, ifelse(prospectData$loan_status_description == "CHARGEOFF", 1, 0))

table(prospectData$Defaulted)


unique(prospectData$prosper_rating)
```
To clean the Data, we changed the following variables to factors and logicals:

* loan_status
* scorex
* income_range
* employment_status_description
* borrower_state
* income_verifiable





## Linear Regression
```{r echo = FALSE, eval = FALSE}

# should we be including "loan_status" and "loan_status_description in this"?????
linreg = lm(borrower_rate ~ number_of_days + principal_balance + loan_status + amount_funded + listing_term + listing_monthly_payment + scorex + prosper_score + listing_category_id + income_range + stated_monthly_income + income_verifiable + dti_wprosper_loan + employment_status_description + months_employed + monthly_debt + current_delinquencies + delinquencies_last7_years + public_records_last10_years + public_records_last12_months + credit_lines_last7_years + inquiries_last6_months + amount_delinquent + current_credit_lines + open_credit_lines + bankcard_utilization + total_open_revolving_accounts + installment_balance + real_estate_balance + revolving_balance + real_estate_payment + revolving_available_percent + total_inquiries + satisfactory_accounts + was_delinquent_derog + delinquencies_over30_days + delinquencies_over60_days,data = prospectData)

summary(linreg)

#stepModel <- step(linreg, direction = "backward")
#stepModel2 <- step(linreg, direction = "both")

#summary(stepModel)

```

```{}
To create our Linear Regression, we first used all variables that we deemed pertinent to the regression - 
excluding the dependent variable (borrower_rate), irrelevant variables (loan_origination_date, occupation, 
borrower_state, borrower_city, lender_indicator, first_recorded_credit_line), variables that repeated themselves as both factors and integers (prosper_rating, income_range_description), and those that appeared as NA on our 
regression (total_trade_items, now_delinquent_derog, delinquencies_over_90_days)

We then used the function step() to...(whatever step does)...

loan_status_description???


```



## Logistic Regression
```{r echo = FALSE, eval = FALSE}
#logReg <- glm(Defaulted ~ number_of_days + principal_balance + amount_funded + listing_term + listing_monthly_payment + prosper_score + income_range + stated_monthly_income + months_employed + monthly_debt + current_delinquencies + delinquencies_last7_years + public_records_last10_years + public_records_last12_months + credit_lines_last7_years + inquiries_last6_months + amount_delinquent + current_credit_lines + open_credit_lines + bankcard_utilization + total_open_revolving_accounts + installment_balance + real_estate_balance + revolving_balance + real_estate_payment + revolving_available_percent + total_inquiries + satisfactory_accounts + was_delinquent_derog + delinquencies_over30_days + delinquencies_over60_days + scorex + income_range + employment_status_description + income_verifiable, data = prospectData, family = "binomial")
#summary(logReg)

#stepLogreg <- step(logReg, direction = "both")


#summary(stepLogreg)

```